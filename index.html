<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALTECH AI - Fully Automated Assistant</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #007bff;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .app-container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            padding: 30px;
            background: rgba(0, 123, 255, 0.2);
            border-radius: 20px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .header h1 {
            font-size: 2.8em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #00b4db, #0083b0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .automation-level {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .level-badge {
            padding: 10px 20px;
            background: rgba(40, 167, 69, 0.2);
            border-radius: 25px;
            font-weight: 600;
            border: 2px solid var(--success);
        }
        
        .level-badge.max {
            background: rgba(220, 53, 69, 0.2);
            border-color: var(--danger);
            animation: glow 2s infinite;
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 10px var(--danger); }
            50% { box-shadow: 0 0 20px var(--danger); }
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 25px;
        }
        
        .sidebar {
            background: rgba(255,255,255,0.05);
            padding: 25px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .voice-section {
            background: rgba(255,255,255,0.05);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            text-align: center;
        }
        
        .voice-orb {
            width: 180px;
            height: 180px;
            background: radial-gradient(circle, var(--primary), #0056b3);
            border-radius: 50%;
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 8px solid rgba(255,255,255,0.2);
            box-shadow: 0 0 50px rgba(0,123,255,0.5);
            position: relative;
        }
        
        .voice-orb::after {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: conic-gradient(transparent, var(--primary), transparent);
            border-radius: 50%;
            animation: rotate 3s linear infinite;
        }
        
        @keyframes rotate {
            100% { transform: rotate(360deg); }
        }
        
        .voice-orb.listening {
            background: radial-gradient(circle, var(--danger), #bd2130);
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        #status {
            font-size: 1.2em;
            margin: 20px 0;
            color: #a0a0a0;
        }
        
        #transcript {
            background: rgba(0,0,0,0.3);
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            font-size: 1.3em;
            min-height: 100px;
            border-left: 5px solid var(--primary);
            text-align: left;
        }
        
        .ai-response {
            background: rgba(0,0,0,0.3);
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            text-align: left;
            border-left: 5px solid var(--success);
        }
        
        .automation-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }
        
        .auto-btn {
            padding: 20px;
            background: linear-gradient(135deg, var(--primary), #0056b3);
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            font-size: 1.1em;
            font-weight: 600;
        }
        
        .auto-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }
        
        .auto-btn.call {
            background: linear-gradient(135deg, var(--success), #1e7e34);
        }
        
        .auto-btn.call:hover {
            background: linear-gradient(135deg, #218838, #1c7430);
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .feature-card {
            background: rgba(255,255,255,0.05);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.1);
            transition: all 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
        }
        
        .feature-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .auto-process {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid var(--warning);
        }
        
        .process-step {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px;
            margin: 8px 0;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
        }
        
        .process-step.completed {
            background: rgba(40,167,69,0.2);
            color: #90ee90;
        }
        
        .mobile-app-section {
            background: linear-gradient(135deg, rgba(0,123,255,0.3), rgba(108,92,231,0.3));
            padding: 30px;
            border-radius: 20px;
            margin-top: 30px;
            text-align: center;
            border: 2px solid rgba(255,255,255,0.2);
        }
        
        .app-badge {
            display: inline-block;
            padding: 15px 30px;
            background: white;
            color: black;
            border-radius: 50px;
            margin: 15px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .app-badge:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .automation-controls {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .feature-grid {
                grid-template-columns: 1fr;
            }
            
            .voice-orb {
                width: 150px;
                height: 150px;
            }
        }
        
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 8px 16px;
            background: rgba(40,167,69,0.2);
            border-radius: 20px;
            margin: 10px;
        }
        
        .typing-indicator {
            display: inline-flex;
            gap: 5px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--primary);
            border-radius: 50%;
            animation: bounce 1.4s infinite;
        }
        
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="header">
            <h1><i class="fas fa-robot"></i> ALTECH AI - FULLY AUTOMATED</h1>
            <p>Voice-controlled assistant with complete hands-free operation</p>
            <div class="automation-level">
                <span class="level-badge">üé§ Voice Recognition</span>
                <span class="level-badge">ü§ñ AI Processing</span>
                <span class="level-badge max">‚ö° Full Automation</span>
                <span class="level-badge">ü¶æ Accessibility Mode</span>
            </div>
            <div class="status-indicator">
                <i class="fas fa-circle" style="color: #28a745;"></i>
                <span>System: ONLINE</span>
            </div>
        </div>
        
        <div class="main-content">
            <div class="sidebar">
                <h3><i class="fas fa-sliders-h"></i> Automation Settings</h3>
                <div style="margin: 20px 0;">
                    <label style="display: block; margin-bottom: 10px;">Automation Level:</label>
                    <select id="autoLevel" style="width: 100%; padding: 12px; border-radius: 10px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.2);">
                        <option value="full">Full Automation (Hands-free)</option>
                        <option value="semi">Semi-Automatic</option>
                        <option value="voice">Voice Only</option>
                    </select>
                </div>
                
                <div style="margin: 20px 0;">
                    <label style="display: flex; align-items: center; gap: 10px;">
                        <input type="checkbox" id="autoCall" checked>
                        Auto-press call button
                    </label>
                    <label style="display: flex; align-items: center; gap: 10px; margin-top: 10px;">
                        <input type="checkbox" id="autoConfirm" checked>
                        Auto-confirm actions
                    </label>
                    <label style="display: flex; align-items: center; gap: 10px; margin-top: 10px;">
                        <input type="checkbox" id="autoRespond" checked>
                        Auto-respond to messages
                    </label>
                </div>
                
                <h3><i class="fas fa-history"></i> Auto-Log</h3>
                <div id="autoLog" style="height: 200px; overflow-y: auto; margin-top: 15px; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; font-size: 0.9em;">
                    <div style="color: #90ee90;">System initialized...</div>
                    <div style="color: #90ee90;">Voice recognition ready...</div>
                </div>
            </div>
            
            <div class="voice-section">
                <!-- Voice Interface -->
                <div class="voice-orb" id="voiceOrb" onclick="toggleListening()">
                    <i class="fas fa-microphone" style="font-size: 3.5em; color: white; z-index: 1; position: relative;"></i>
                </div>
                
                <div id="status">Say "Hey ALTECH" or tap to activate</div>
                <div id="transcript">Waiting for voice command...</div>
                
                <div class="ai-response">
                    <h3><i class="fas fa-brain"></i> AI Assistant</h3>
                    <div id="aiOutput">
                        <div class="typing-indicator">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                        Ready for full automation. Try: "Call Brian", "Send message to mom", or "Set alarm for 7 AM"
                    </div>
                </div>
                
                <!-- Automation Controls -->
                <div class="automation-controls">
                    <button class="auto-btn call" onclick="autoCall('Brian')">
                        <i class="fas fa-phone-volume"></i>
                        <span>Auto-Call</span>
                    </button>
                    <button class="auto-btn" onclick="autoMessage()">
                        <i class="fas fa-comment-dots"></i>
                        <span>Auto-Message</span>
                    </button>
                    <button class="auto-btn" onclick="autoNote()">
                        <i class="fas fa-sticky-note"></i>
                        <span>Auto-Note</span>
                    </button>
                    <button class="auto-btn" onclick="autoReminder()">
                        <i class="fas fa-clock"></i>
                        <span>Auto-Reminder</span>
                    </button>
                </div>
                
                <!-- Automation Process Display -->
                <div class="auto-process">
                    <h4><i class="fas fa-cogs"></i> Current Automation Process</h4>
                    <div id="processSteps">
                        <div class="process-step">
                            <i class="fas fa-microphone"></i>
                            <span>1. Listening for command...</span>
                        </div>
                        <div class="process-step">
                            <i class="fas fa-brain"></i>
                            <span>2. Processing intent...</span>
                        </div>
                        <div class="process-step">
                            <i class="fas fa-bolt"></i>
                            <span>3. Executing action...</span>
                        </div>
                    </div>
                </div>
                
                <!-- Features Grid -->
                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-phone"></i>
                        </div>
                        <h4>Auto-Calling</h4>
                        <p>Finds contact, dials, and initiates call automatically</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-sms"></i>
                        </div>
                        <h4>Auto-Messaging</h4>
                        <p>Sends SMS/WhatsApp without manual typing</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-tasks"></i>
                        </div>
                        <h4>Auto-Tasks</h4>
                        <p>Sets reminders, alarms, and schedules automatically</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h4>Auto-Search</h4>
                        <p>Performs web searches and reads results aloud</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Mobile App Section -->
        <div class="mobile-app-section">
            <h3><i class="fas fa-mobile-alt"></i> For Complete Automation</h3>
            <p>Install the native mobile app for FULL hands-free operation including auto-pressing buttons</p>
            <div style="margin: 25px 0;">
                <a href="#" class="app-badge" onclick="installApp('android')">
                    <i class="fab fa-android"></i> Android App
                </a>
                <a href="#" class="app-badge" onclick="installApp('ios')">
                    <i class="fab fa-apple"></i> iOS App
                </a>
                <a href="#" class="app-badge" onclick="installApp('pwa')">
                    <i class="fab fa-chrome"></i> PWA Install
                </a>
            </div>
            <p style="font-size: 0.9em; opacity: 0.8;">
                <i class="fas fa-info-circle"></i> Native apps can use Accessibility Services for complete automation
            </p>
        </div>
    </div>

    <script>
        // ================ FULL AUTOMATION SYSTEM ================
        
        // Core Variables
        let recognition = null;
        let isListening = false;
        let automationLevel = 'full';
        let autoCallEnabled = true;
        let autoConfirmEnabled = true;
        let autoRespondEnabled = true;
        
        // Sample Contacts
        const contacts = [
            { id: 1, name: "Brian Smith", phone: "+1234567890", type: "mobile" },
            { id: 2, name: "Brian Johnson", phone: "+0987654321", type: "home" },
            { id: 3, name: "Sarah Johnson", phone: "+1122334455", type: "mobile" },
            { id: 4, name: "Emergency Contact", phone: "911", type: "emergency" },
            { id: 5, name: "Mom", phone: "+1555123456", type: "mobile" }
        ];
        
        // Initialize System
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('üöÄ Initializing Full Automation System...');
            
            // Initialize voice recognition
            await initializeVoiceRecognition();
            
            // Setup wake word detection
            setupWakeWord();
            
            // Load settings
            loadSettings();
            
            // Show welcome
            setTimeout(() => {
                speakResponse("ALTECH AI fully automated system initialized. Ready for hands-free operation.");
                updateAIResponse("ü§ñ <strong>Full Automation Mode Active</strong><br>I can now perform tasks completely hands-free. Try saying 'Call Brian' or 'Send message to mom'");
                logEvent('System initialized with full automation');
                updateProcessStep(0, true);
            }, 1000);
        });
        
        // Initialize Voice Recognition
        async function initializeVoiceRecognition() {
            try {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                if (!SpeechRecognition) {
                    showError('Voice recognition not supported');
                    return;
                }
                
                recognition = new SpeechRecognition();
                recognition.continuous = false;
                recognition.interimResults = true;
                recognition.lang = 'en-US';
                
                recognition.onstart = () => {
                    isListening = true;
                    document.getElementById('voiceOrb').classList.add('listening');
                    document.getElementById('status').textContent = 'üé§ Listening... Speak now';
                    updateProcessStep(0, true);
                    logEvent('Voice recognition started');
                };
                
                recognition.onresult = (event) => {
                    const transcript = Array.from(event.results)
                        .map(result => result[0].transcript)
                        .join('');
                    
                    document.getElementById('transcript').textContent = transcript;
                    
                    if (event.results[0].isFinal) {
                        handleAutomatedCommand(transcript);
                    }
                };
                
                recognition.onend = () => {
                    isListening = false;
                    document.getElementById('voiceOrb').classList.remove('listening');
                    document.getElementById('status').textContent = '‚úÖ Ready';
                    updateProcessStep(0, false);
                };
                
                recognition.onerror = (event) => {
                    console.error('Recognition error:', event.error);
                    showError('Voice recognition error: ' + event.error);
                };
                
                console.log('‚úÖ Voice recognition initialized');
                
            } catch (error) {
                console.error('Voice init error:', error);
                showError('Failed to initialize voice recognition');
            }
        }
        
        // Setup Wake Word Detection
        function setupWakeWord() {
            // Simple wake word detection
            document.addEventListener('keypress', (e) => {
                if (e.key === ' ' || e.key === 'Enter') {
                    toggleListening();
                }
            });
            
            // Also listen for "Hey ALTECH"
            setTimeout(() => {
                speakResponse("You can say 'Hey ALTECH' at any time to activate me.");
            }, 3000);
        }
        
        // Handle Automated Commands
        async function handleAutomatedCommand(command) {
            logEvent(`Command received: "${command}"`);
            updateProcessStep(1, true);
            
            // Process the command with AI
            const intent = await analyzeIntent(command);
            
            // Execute based on intent
            await executeAutomatedAction(intent, command);
            
            updateProcessStep(1, false);
        }
        
        // Analyze Command Intent
        async function analyzeIntent(command) {
            const lowerCmd = command.toLowerCase();
            
            if (/(call|phone|dial|ring)/i.test(lowerCmd)) {
                return { type: 'call', command: command };
            }
            else if (/(message|text|sms|whatsapp)/i.test(lowerCmd)) {
                return { type: 'message', command: command };
            }
            else if (/(note|remember|write)/i.test(lowerCmd)) {
                return { type: 'note', command: command };
            }
            else if (/(remind|alarm|alert)/i.test(lowerCmd)) {
                return { type: 'reminder', command: command };
            }
            else if (/(search|google|find)/i.test(lowerCmd)) {
                return { type: 'search', command: command };
            }
            else if (/(weather|forecast)/i.test(lowerCmd)) {
                return { type: 'weather', command: command };
            }
            else if (/(time|clock)/i.test(lowerCmd)) {
                return { type: 'time', command: command };
            }
            else {
                // Use AI for general queries
                const aiResponse = await getAIResponse(command);
                return { type: 'general', command: command, response: aiResponse };
            }
        }
        
        // Execute Automated Action
        async function executeAutomatedAction(intent, originalCommand) {
            updateProcessStep(2, true);
            
            switch(intent.type) {
                case 'call':
                    await performAutoCall(intent.command);
                    break;
                case 'message':
                    await performAutoMessage(intent.command);
                    break;
                case 'note':
                    performAutoNote(intent.command);
                    break;
                case 'reminder':
                    performAutoReminder(intent.command);
                    break;
                case 'search':
                    performAutoSearch(intent.command);
                    break;
                case 'weather':
                    performAutoWeather(intent.command);
                    break;
                case 'time':
                    performAutoTime();
                    break;
                case 'general':
                    updateAIResponse(intent.response);
                    speakResponse(intent.response);
                    break;
            }
            
            updateProcessStep(2, false);
            logEvent(`Action completed: ${intent.type}`);
        }
        
        // ================ AUTO-CALL SYSTEM ================
        async function performAutoCall(command) {
            const nameMatch = command.match(/(?:call|phone|dial|ring)\s+(?:me\s+)?(\w+(?:\s+\w+)?)/i);
            
            if (!nameMatch) {
                speakResponse("Who would you like to call? Please say the name.");
                return;
            }
            
            const name = nameMatch[1];
            const matchingContacts = contacts.filter(c => 
                c.name.toLowerCase().includes(name.toLowerCase())
            );
            
            if (matchingContacts.length === 0) {
                const response = `No contact found named ${name}. Would you like to add this contact?`;
                updateAIResponse(response);
                speakResponse(response);
                return;
            }
            
            let contactToCall;
            
            if (matchingContacts.length === 1) {
                contactToCall = matchingContacts[0];
            } else {
                // Multiple matches - use the first mobile contact or ask
                contactToCall = matchingContacts.find(c => c.type === 'mobile') || matchingContacts[0];
                speakResponse(`Found ${matchingContacts.length} contacts. Calling ${contactToCall.name}`);
            }
            
            // Start the automated call process
            await initiateAutoCall(contactToCall);
        }
        
        async function initiateAutoCall(contact) {
            logEvent(`Initiating auto-call to ${contact.name}`);
            
            // Step 1: Announce the call
            speakResponse(`Calling ${contact.name} at ${formatPhone(contact.phone)}`);
            updateAIResponse(`üìû <strong>Auto-Calling ${contact.name}</strong><br>Phone: ${contact.phone}`);
            
            // Step 2: Prepare call URL
            const callUrl = `tel:${contact.phone.replace(/\D/g, '')}`;
            
            // Step 3: Check if we can auto-press (requires special permissions)
            const canAutoPress = await checkAutoPressCapability();
            
            if (canAutoPress && autoCallEnabled) {
                // Attempt to auto-press the call button
                attemptAutoPressCall(callUrl, contact);
            } else {
                // Fallback: Open dialer with number pre-filled
                openDialerWithNumber(contact);
            }
        }
        
        function attemptAutoPressCall(callUrl, contact) {
            // This would require Accessibility Services in a native app
            // For web, we simulate and provide instructions
            
            updateAIResponse(`
                <div style="padding: 15px; background: rgba(40,167,69,0.2); border-radius: 10px; margin: 10px 0;">
                    <strong>üîÑ Auto-Call Process:</strong>
                    <div class="process-step completed">
                        <i class="fas fa-check"></i>
                        <span>1. Contact identified: ${contact.name}</span>
                    </div>
                    <div class="process-step completed">
                        <i class="fas fa-check"></i>
                        <span>2. Number prepared: ${contact.phone}</span>
                    </div>
                    <div class="process-step">
                        <i class="fas fa-phone"></i>
                        <span>3. Opening phone app...</span>
                    </div>
                </div>
                <p style="margin-top: 10px; font-size: 0.9em;">
                    <i class="fas fa-info-circle"></i> For complete auto-dialing, install the mobile app.
                </p>
            `);
            
            // Simulate the process
            setTimeout(() => {
                if (isMobileDevice()) {
                    // On mobile, open the dialer with number
                    window.location.href = callUrl;
                    speakResponse("Phone app opening. Number is ready to dial.");
                } else {
                    // On desktop, show simulation
                    simulateCall(contact);
                }
            }, 2000);
        }
        
        function openDialerWithNumber(contact) {
            const phoneNumber = contact.phone.replace(/\D/g, '');
            
            if (isMobileDevice()) {
                // Mobile - open dialer
                window.location.href = `tel:${phoneNumber}`;
                speakResponse(`Opening phone app with ${contact.name}'s number. Please press the green call button.`);
            } else {
                // Desktop - show instructions
                simulateCall(contact);
            }
        }
        
        function simulateCall(contact) {
            const callWindow = window.open('', '_blank');
            if (callWindow) {
                callWindow.document.write(`
                    <!DOCTYPE html>
                    <html>
                    <head>
                        <title>Auto-Calling ${contact.name}</title>
                        <style>
                            body {
                                font-family: Arial, sans-serif;
                                text-align: center;
                                padding: 50px;
                                background: linear-gradient(135deg, #667eea, #764ba2);
                                color: white;
                            }
                            .call-screen {
                                background: white;
                                color: black;
                                padding: 40px;
                                border-radius: 20px;
                                margin: 20px auto;
                                max-width: 400px;
                                box-shadow: 0 20px 40px rgba(0,0,0,0.3);
                            }
                            .call-button {
                                width: 80px;
                                height: 80px;
                                background: #28a745;
                                border-radius: 50%;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                margin: 30px auto;
                                cursor: pointer;
                                animation: pulse 2s infinite;
                            }
                            @keyframes pulse {
                                0% { transform: scale(1); }
                                50% { transform: scale(1.1); }
                                100% { transform: scale(1); }
                            }
                        </style>
                    </head>
                    <body>
                        <h1>üìû Auto-Call Simulation</h1>
                        <div class="call-screen">
                            <h2>Calling: ${contact.name}</h2>
                            <p style="font-size: 1.5em; margin: 20px 0;">${contact.phone}</p>
                            <div class="call-button" onclick="alert('In native app, this would automatically press the call button')">
                                <i class="fas fa-phone" style="color: white; font-size: 2em;"></i>
                            </div>
                            <p>In the mobile app, this call would be placed automatically</p>
                        </div>
                    </body>
                    </html>
                `);
            }
            
            speakResponse(`Call simulation for ${contact.name}. In the mobile app, this would dial automatically.`);
        }
        
        // ================ OTHER AUTO FUNCTIONS ================
        
        async function performAutoMessage(command) {
            let contactName = '';
            let message = '';
            
            if (command.includes('message to')) {
                contactName = command.split('message to')[1]?.split('saying')[0]?.trim();
                message = command.split('saying')[1]?.trim();
            }
            
            if (!contactName) {
                contactName = prompt("Who to message?");
            }
            if (!message) {
                message = prompt("Message text?");
            }
            
            const contact = contacts.find(c => c.name.toLowerCase().includes(contactName.toLowerCase()));
            
            if (contact) {
                const encodedMessage = encodeURIComponent(message);
                const whatsappUrl = `https://wa.me/${contact.phone.replace(/\D/g, '')}?text=${encodedMessage}`;
                
                updateAIResponse(`üí¨ <strong>Auto-Message to ${contact.name}:</strong><br>"${message}"`);
                speakResponse(`Sending message to ${contact.name}: ${message}`);
                
                if (autoConfirmEnabled) {
                    setTimeout(() => {
                        window.open(whatsappUrl, '_blank');
                        speakResponse("Message app opening.");
                    }, 1500);
                }
            }
        }
        
        function performAutoNote(command) {
            const noteText = command.replace(/add note|note that|remember that/gi, '').trim();
            
            if (noteText) {
                updateAIResponse(`üìù <strong>Auto-Note Created:</strong><br>"${noteText}"`);
                speakResponse(`Note added: ${noteText}`);
                logEvent(`Note created: ${noteText}`);
            }
        }
        
        function performAutoReminder(command) {
            let task = '';
            if (command.includes('remind me to')) {
                task = command.split('remind me to')[1]?.trim();
            }
            
            if (task) {
                const time = new Date();
                if (command.includes('tomorrow')) time.setDate(time.getDate() + 1);
                if (command.includes('next week')) time.setDate(time.getDate() + 7);
                
                updateAIResponse(`‚è∞ <strong>Auto-Reminder Set:</strong><br>${task}<br>Time: ${time.toLocaleString()}`);
                speakResponse(`Reminder set for ${task}`);
                logEvent(`Reminder created: ${task}`);
            }
        }
        
        function performAutoSearch(command) {
            let query = '';
            if (command.includes('search for')) {
                query = command.split('search for')[1]?.trim();
            }
            
            if (query) {
                updateAIResponse(`üîç <strong>Auto-Searching:</strong><br>${query}`);
                speakResponse(`Searching for ${query}`);
                
                if (autoConfirmEnabled) {
                    setTimeout(() => {
                        window.open(`https://www.google.com/search?q=${encodeURIComponent(query)}`, '_blank');
                    }, 2000);
                }
            }
        }
        
        function performAutoWeather(command) {
            let location = '';
            if (command.includes('weather in')) {
                location = command.split('weather in')[1]?.trim();
            }
            
            if (location) {
                updateAIResponse(`üå§Ô∏è <strong>Auto-Weather Check:</strong><br>Location: ${location}`);
                speakResponse(`Checking weather for ${location}`);
                
                if (autoConfirmEnabled) {
                    setTimeout(() => {
                        window.open(`https://www.google.com/search?q=weather+${encodeURIComponent(location)}`, '_blank');
                    }, 2000);
                }
            }
        }
        
        function performAutoTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: true 
            });
            const dateStr = now.toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            updateAIResponse(`üïí <strong>Current Time:</strong><br>${timeStr}<br>${dateStr}`);
            speakResponse(`The time is ${timeStr} on ${dateStr}`);
        }
        
        // ================ HELPER FUNCTIONS ================
        
        function toggleListening() {
            if (!recognition) {
                showError('Voice recognition not ready');
                return;
            }
            
            if (isListening) {
                recognition.stop();
            } else {
                try {
                    recognition.start();
                } catch (error) {
                    console.error('Start error:', error);
                }
            }
        }
        
        async function getAIResponse(query) {
            // Simple AI responses
            const responses = {
                greeting: "Hello! I'm your fully automated ALTECH assistant. What can I do for you hands-free?",
                help: "I can: üìû Make calls automatically, üí¨ Send messages, üìù Take notes, ‚è∞ Set reminders, üîç Search the web, üå§Ô∏è Check weather, and more - all without you touching anything!",
                capabilities: "I understand natural language. Try: 'Call mom', 'Send message to Brian saying I'll be late', 'Set reminder for meeting tomorrow', or 'What's the weather like?'"
            };
            
            const lowerQuery = query.toLowerCase();
            if (/(hello|hi|hey)/.test(lowerQuery)) return responses.greeting;
            if (/(help|what can you do)/.test(lowerQuery)) return responses.capabilities;
            
            return `I understand: "${query}". I'll perform that action automatically for you.`;
        }
        
        function speakResponse(text) {
            if (!('speechSynthesis' in window)) return;
            
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.rate = 1.0;
            utterance.pitch = 1.0;
            utterance.volume = 1.0;
            window.speechSynthesis.speak(utterance);
        }
        
        function updateAIResponse(html) {
            document.getElementById('aiOutput').innerHTML = html;
        }
        
        function updateProcessStep(stepIndex, active) {
            const steps = document.querySelectorAll('.process-step');
            if (steps[stepIndex]) {
                steps[stepIndex].classList.toggle('completed', active);
            }
        }
        
        function logEvent(message) {
            const logDiv = document.getElementById('autoLog');
            const entry = document.createElement('div');
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            entry.style.color = '#90ee90';
            logDiv.appendChild(entry);
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        function showError(message) {
            logEvent(`ERROR: ${message}`);
            speakResponse(`Error: ${message}`);
        }
        
        function isMobileDevice() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }
        
        function formatPhone(phone) {
            return phone.replace(/(\d{3})(\d{3})(\d{4})/, '($1) $2-$3');
        }
        
        async function checkAutoPressCapability() {
            // In a real native app, this would check Accessibility Service permissions
            // For web, we return false (limited capability)
            return false;
        }
        
        function loadSettings() {
            const autoLevel = document.getElementById('autoLevel');
            const autoCall = document.getElementById('autoCall');
            const autoConfirm = document.getElementById('autoConfirm');
            const autoRespond = document.getElementById('autoRespond');
            
            if (autoLevel) autoLevel.value = automationLevel;
            if (autoCall) autoCall.checked = autoCallEnabled;
            if (autoConfirm) autoConfirm.checked = autoConfirmEnabled;
            if (autoRespond) autoRespond.checked = autoRespondEnabled;
            
            // Add event listeners
            if (autoLevel) autoLevel.addEventListener('change', (e) => {
                automationLevel = e.target.value;
                logEvent(`Automation level changed to: ${automationLevel}`);
            });
            
            if (autoCall) autoCall.addEventListener('change', (e) => {
                autoCallEnabled = e.target.checked;
                logEvent(`Auto-call ${autoCallEnabled ? 'enabled' : 'disabled'}`);
            });
            
            if (autoConfirm) autoConfirm.addEventListener('change', (e) => {
                autoConfirmEnabled = e.target.checked;
                logEvent(`Auto-confirm ${autoConfirmEnabled ? 'enabled' : 'disabled'}`);
            });
            
            if (autoRespond) autoRespond.addEventListener('change', (e) => {
                autoRespondEnabled = e.target.checked;
                logEvent(`Auto-respond ${autoRespondEnabled ? 'enabled' : 'disabled'}`);
            });
        }
        
        // ================ PUBLIC FUNCTIONS ================
        
        function autoCall(name) {
            const command = `Call ${name}`;
            document.getElementById('transcript').textContent = command;
            handleAutomatedCommand(command);
        }
        
        function autoMessage() {
            const contact = prompt("Contact name?");
            const message = prompt("Message?");
            if (contact && message) {
                const command = `Send message to ${contact} saying ${message}`;
                document.getElementById('transcript').textContent = command;
                handleAutomatedCommand(command);
            }
        }
        
        function autoNote() {
            const note = prompt("Note text?");
            if (note) {
                const command = `Add note ${note}`;
                document.getElementById('transcript').textContent = command;
                handleAutomatedCommand(command);
            }
        }
        
        function autoReminder() {
            const task = prompt("Reminder for?");
            const time = prompt("When? (e.g., 'tomorrow at 3 PM')");
            if (task && time) {
                const command = `Remind me to ${task} ${time}`;
                document.getElementById('transcript').textContent = command;
                handleAutomatedCommand(command);
            }
        }
        
        function installApp(platform) {
            let message = '';
            
            switch(platform) {
                case 'android':
                    message = "Android app provides full Accessibility Service access for complete automation including auto-pressing buttons.";
                    window.open('https://play.google.com/store/apps/details?id=com.example.altechai', '_blank');
                    break;
                case 'ios':
                    message = "iOS app uses Voice Control and Accessibility features for hands-free operation.";
                    window.open('https://apps.apple.com/app/altech-ai-assistant/id1234567890', '_blank');
                    break;
                case 'pwa':
                    message = "Progressive Web App with enhanced capabilities for hands-free use.";
                    if ('serviceWorker' in navigator) {
                        navigator.serviceWorker.register('/sw.js');
                        showInstallPrompt();
                    }
                    break;
            }
            
            logEvent(`App installation initiated: ${platform}`);
            speakResponse(message);
        }
        
        function showInstallPrompt() {
            if ('BeforeInstallPromptEvent' in window) {
                window.addEventListener('beforeinstallprompt', (e) => {
                    e.preventDefault();
                    e.prompt();
                    logEvent('PWA install prompt shown');
                });
            }
        }
        
        // Initialize
        console.log('‚úÖ Full Automation System Ready');
        
    </script>
</body>
</html>
